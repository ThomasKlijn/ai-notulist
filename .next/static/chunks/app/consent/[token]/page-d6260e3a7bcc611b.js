(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{63:(e,t,n)=>{"use strict";var i=n(7260);n.o(i,"useParams")&&n.d(t,{useParams:function(){return i.useParams}}),n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}})},4845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(5155),o=n(2115),r=n(63);function s(){let e=(0,r.useParams)(),t=null==e?void 0:e.token,[n,s]=(0,o.useState)(null),[a,d]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!1),[p,x]=(0,o.useState)(null);(0,o.useEffect)(()=>{t&&fetch("/api/consent/".concat(t)).then(e=>e.json()).then(e=>{e.error?x(e.error):s(e)}).catch(e=>x("Failed to load consent information")).finally(()=>d(!1))},[t]);let h=async e=>{c(!0);try{let n=await fetch("/api/consent/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),i=await n.json();i.ok?s(t=>t?{...t,attendee:{...t.attendee,consentGiven:"give"===e}}:null):x(i.error||"Failed to update consent")}catch(e){x("Failed to update consent")}finally{c(!1)}};return a?(0,i.jsx)("main",{style:{maxWidth:"600px",margin:"0 auto",padding:"32px 16px",textAlign:"center"},children:(0,i.jsx)("div",{children:"Loading consent information..."})}):p?(0,i.jsxs)("main",{style:{maxWidth:"600px",margin:"0 auto",padding:"32px 16px"},children:[(0,i.jsx)("h1",{style:{color:"#dc2626",marginBottom:"16px"},children:"Error"}),(0,i.jsx)("p",{children:p}),(0,i.jsx)("p",{style:{marginTop:"16px",color:"#666"},children:"This consent link may be invalid or expired. Please contact the meeting organizer."})]}):n?(0,i.jsxs)("main",{style:{maxWidth:"600px",margin:"0 auto",padding:"32px 16px",lineHeight:"1.6"},children:[(0,i.jsx)("h1",{style:{marginBottom:"24px",fontSize:"28px",fontWeight:"bold"},children:"Meeting Recording Consent"}),(0,i.jsxs)("div",{style:{backgroundColor:"#f8f9fa",padding:"24px",borderRadius:"8px",marginBottom:"32px"},children:[(0,i.jsx)("h2",{style:{marginBottom:"16px",fontSize:"20px"},children:"Meeting Details"}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Title:"})," ",n.meeting.title]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Organizer invited:"})," ",n.attendee.name||"You"," (",n.attendee.email,")"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Created:"})," ",new Date(n.meeting.createdAt).toLocaleDateString()]})]}),(0,i.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,i.jsx)("h2",{style:{marginBottom:"16px",fontSize:"20px"},children:"Privacy Notice"}),(0,i.jsx)("p",{style:{marginBottom:"16px"},children:"You are being asked to consent to audio recording and processing for this meeting. Your audio will be used for:"}),(0,i.jsxs)("ul",{style:{marginBottom:"16px",paddingLeft:"24px"},children:[(0,i.jsx)("li",{children:"Automatic transcription of spoken text via ElevenLabs speech-to-text services"}),(0,i.jsx)("li",{children:"AI-generated meeting summary creation via OpenAI"}),(0,i.jsx)("li",{children:"Email delivery of meeting notes to all participants via SendGrid"})]}),(0,i.jsxs)("p",{style:{marginBottom:"16px"},children:[(0,i.jsx)("strong",{children:"Your rights:"})," You can withdraw your consent at any time, which will immediately stop further processing and delete your audio data. Audio recordings are automatically deleted after transcription processing."]}),(0,i.jsxs)("p",{style:{marginBottom:"16px"},children:[(0,i.jsx)("a",{href:"/privacy",style:{color:"#3b82f6",textDecoration:"underline"},children:"Read our complete privacy policy"})," for more information about data processing and your rights."]})]}),(0,i.jsxs)("div",{style:{padding:"24px",border:"2px solid #e5e7eb",borderRadius:"8px",textAlign:"center"},children:[(0,i.jsxs)("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:["Current Status: ",n.attendee.consentGiven?"✅ Consent Given":"❌ Consent Not Given"]}),n.attendee.consentGiven?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{style:{marginBottom:"16px",color:"#10b981",fontWeight:"500"},children:"Thank you for providing consent. Recording can proceed."}),(0,i.jsx)("button",{onClick:()=>h("withdraw"),disabled:l,style:{backgroundColor:"#dc2626",color:"white",padding:"12px 24px",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"600",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},"data-testid":"button-withdraw-consent",children:l?"Processing...":"Withdraw Consent"})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{style:{marginBottom:"16px",color:"#666"},children:"Recording cannot start until you provide consent."}),(0,i.jsx)("button",{onClick:()=>h("give"),disabled:l,style:{backgroundColor:"#10b981",color:"white",padding:"12px 24px",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"600",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},"data-testid":"button-give-consent",children:l?"Processing...":"Give Consent to Record"})]})]}),n.attendee.consentGiven&&(0,i.jsx)("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#fef3c7",borderRadius:"6px"},children:(0,i.jsxs)("p",{style:{fontSize:"14px",color:"#92400e"},children:[(0,i.jsx)("strong",{children:"Note:"})," Withdrawing consent will stop all further audio processing and delete your recorded data. This action cannot be undone."]})})]}):null}},9105:(e,t,n)=>{Promise.resolve().then(n.bind(n,4845))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9105)),_N_E=e.O()}]);