(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{63:(e,n,r)=>{"use strict";var t=r(7260);r.o(t,"useParams")&&r.d(n,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(n,{useRouter:function(){return t.useRouter}})},79:(e,n,r)=>{Promise.resolve().then(r.bind(r,9661))},9661:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>a});var t=r(5155),i=r(2115),s=r(63);function a(){var e;let{id:n}=(0,s.useParams)(),[r,a]=(0,i.useState)(null),[o,d]=(0,i.useState)(null),[l,c]=(0,i.useState)(!1),[u,p]=(0,i.useState)(0),[g,x]=(0,i.useState)(0),[m,h]=(0,i.useState)(null),[f,j]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),y=(0,i.useRef)(0),k=(0,i.useRef)(null),S=(0,i.useRef)(null);(0,i.useEffect)(()=>(l?k.current=setInterval(()=>{p(e=>e+1)},1e3):k.current&&(clearInterval(k.current),k.current=null),()=>{k.current&&clearInterval(k.current)}),[l]),(0,i.useEffect)(()=>()=>{k.current&&clearInterval(k.current),S.current&&clearInterval(S.current),null==o||o.stop(),null==r||r.getTracks().forEach(e=>e.stop())},[o,r]);let D=async()=>{try{let e=await fetch("/api/meetings/".concat(n,"/status"));if(e.ok){let n=await e.json();h(n),n.meeting.summary&&!b&&(j(!0),v(!0)),("completed"===n.meeting.status||"failed"===n.meeting.status)&&S.current&&(clearInterval(S.current),S.current=null)}}catch(e){console.error("Error checking meeting status:",e)}},w=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});a(e);let r=new MediaRecorder(e,{mimeType:"audio/webm"});r.ondataavailable=async e=>{if(e.data&&e.data.size>0){let r=y.current++,t=new FormData;t.append("chunk",e.data,"chunk-".concat(r,".webm")),t.append("chunkIndex",String(r));try{let e=await fetch("/api/meetings/".concat(n,"/audio"),{method:"POST",body:t});e.ok?x(e=>e+1):console.error("upload fout",await e.text())}catch(e){console.error("upload error",e)}}},r.start(15e3),d(r),p(0),c(!0)}catch(e){alert("Microfoon-toegang geweigerd of niet beschikbaar."),console.error(e)}},R=async()=>{if(o){o.stop(),c(!1),k.current&&clearInterval(k.current),null==r||r.getTracks().forEach(e=>e.stop()),a(null),d(null);try{await fetch("/api/meetings/".concat(n,"/finish"),{method:"POST"}),S.current=setInterval(D,2e3),D()}catch(e){console.error("Error finishing meeting:",e)}}},I=e=>{switch(e){case"recording":return"#007bff";case"processing":return"#ffc107";case"completed":return"#28a745";case"failed":return"#dc3545";default:return"#6c757d"}};return(0,t.jsxs)("main",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[(0,t.jsxs)("h2",{children:["Meeting ",n]}),m&&(0,t.jsxs)("div",{style:{background:"#e9ecef",padding:"15px",borderRadius:"8px",marginBottom:"20px",borderLeft:"4px solid ".concat(I(m.meeting.status))},children:[(0,t.jsx)("strong",{children:"Status:"})," ",(0,t.jsx)("span",{style:{color:I(m.meeting.status)},children:(e=>{switch(e){case"recording":return"Opname bezig";case"processing":return"Verwerken van audio...";case"completed":return"Klaar! Samenvatting verzonden";case"failed":return"Fout bij verwerken";default:return e}})(m.meeting.status)}),(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Titel:"})," ",m.meeting.title,(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Audio chunks:"})," ",m.meeting.chunksCount,(0,t.jsx)("br",{}),m.meeting.attendees.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Deelnemers:"})," ",m.meeting.attendees.map(e=>e.email).join(", ")]})]}),l&&(0,t.jsxs)("div",{style:{background:"#d4edda",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"\uD83D\uDD34 Opname actief"})}),(0,t.jsxs)("p",{children:["Tijd: ",(0,t.jsx)("strong",{children:new Date(1e3*u).toISOString().substring(11,19)})," \xb7 Verzonden chunks: ",(0,t.jsx)("strong",{children:g})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:"20px"},children:[l?(0,t.jsx)("button",{onClick:R,style:{padding:"12px 24px",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"Stop & afronden"}):(0,t.jsx)("button",{onClick:w,style:{padding:"12px 24px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"Start opname"}),(null==m?void 0:m.meeting.summary)&&(0,t.jsx)("button",{onClick:()=>j(!f),style:{padding:"12px 24px",background:"#007bff",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:f?"\uD83D\uDCD6 Verberg samenvatting":"\uD83D\uDCCB Toon Nederlandse samenvatting"})]}),(0,t.jsx)("p",{style:{color:"#666",fontSize:"14px",marginBottom:"20px"},children:"\uD83D\uDCA1 Laat de laptop/telefoon op tafel liggen. Sluit dit tabblad niet tijdens de opname."}),f&&(()=>{if(!(null==m?void 0:m.meeting.summary))return null;let e=m.meeting.summary;return(0,t.jsxs)("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",marginTop:"20px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,t.jsx)("span",{style:{fontSize:"28px",marginRight:"12px"},children:"\uD83D\uDCCB"}),(0,t.jsx)("h3",{style:{margin:"0",color:"#495057"},children:"Nederlandse Meeting Samenvatting"})]}),e.generalSummary&&(0,t.jsxs)("div",{style:{marginBottom:"20px",background:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,t.jsxs)("h4",{style:{color:"#495057",marginBottom:"12px",display:"flex",alignItems:"center"},children:[(0,t.jsx)("span",{style:{marginRight:"8px"},children:"\uD83D\uDCAC"}),"Algemene Samenvatting"]}),(0,t.jsx)("p",{style:{lineHeight:"1.6",margin:"0",color:"#6c757d"},children:e.generalSummary})]}),e.keyPoints&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("h4",{children:"Belangrijke Punten:"}),(0,t.jsx)("ul",{children:e.keyPoints.map((e,n)=>(0,t.jsx)("li",{children:e},n))})]}),e.decisions&&e.decisions.length>0&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("h4",{children:"Beslissingen:"}),(0,t.jsx)("ul",{children:e.decisions.map((e,n)=>(0,t.jsx)("li",{children:e},n))})]}),e.actionItems&&e.actionItems.length>0&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("h4",{children:"Actiepunten:"}),e.actionItems.map((e,n)=>(0,t.jsxs)("div",{style:{background:"#fff",padding:"10px",margin:"5px 0",borderLeft:"4px solid #007bff"},children:[(0,t.jsx)("strong",{children:"Taak:"})," ",e.task,(0,t.jsx)("br",{}),e.assignee&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Toegewezen aan:"})," ",e.assignee,(0,t.jsx)("br",{})]}),e.dueDate&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Deadline:"})," ",e.dueDate]})]},n))]})]})})(),(null==m?void 0:m.meeting.transcription)&&(0,t.jsxs)("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",marginTop:"20px"},children:[(0,t.jsx)("h3",{children:"Volledige Transcriptie"}),(0,t.jsx)("div",{style:{background:"white",padding:"15px",borderRadius:"4px",fontFamily:"monospace",fontSize:"14px",lineHeight:"1.4",maxHeight:"300px",overflowY:"auto",border:"1px solid #dee2e6"},children:m.meeting.transcription}),(0,t.jsxs)("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:["\uD83D\uDCCA Transcriptie lengte: ",m.meeting.transcription.length," karakters"]})]}),(null==m?void 0:m.meeting.status)==="processing"&&(0,t.jsxs)("div",{style:{background:"#fff3cd",padding:"20px",borderRadius:"8px",marginTop:"20px",border:"1px solid #ffc107"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,t.jsx)("div",{style:{width:"20px",height:"20px",border:"2px solid #ffc107",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"10px"}}),(0,t.jsx)("strong",{children:"\uD83C\uDF99️ Audio wordt verwerkt..."})]}),(0,t.jsxs)("p",{style:{margin:"0 0 10px 0"},children:[(0,t.jsx)("strong",{children:"Stap 1:"})," Audio transcriptie via ElevenLabs Scribe",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Stap 2:"})," AI samenvatting en actiepunten genereren",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Stap 3:"})," Email versturen naar deelnemers"]}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#856404",margin:"10px 0 0 0"},children:"Dit kan 1-3 minuten duren afhankelijk van de lengte van de opname. De samenvatting verschijnt hier zodra deze klaar is."}),(0,t.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]}),(null==m?void 0:m.meeting.status)==="completed"&&(0,t.jsxs)("div",{style:{background:"#d4edda",padding:"20px",borderRadius:"8px",marginTop:"20px",border:"1px solid #28a745"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,t.jsx)("span",{style:{fontSize:"24px",marginRight:"10px"},children:"✅"}),(0,t.jsx)("strong",{style:{color:"#155724"},children:"Meeting succesvol verwerkt!"})]}),(0,t.jsxs)("p",{style:{margin:"0",color:"#155724"},children:["\uD83D\uDCCA ",(0,t.jsx)("strong",{children:"Transcriptie:"})," ",(null==(e=m.meeting.transcription)?void 0:e.length)||0," karakters",(0,t.jsx)("br",{}),"\uD83E\uDD16 ",(0,t.jsx)("strong",{children:"AI Samenvatting:"})," Inclusief actiepunten en beslissingen",(0,t.jsx)("br",{}),"\uD83D\uDCE7 ",(0,t.jsx)("strong",{children:"Email:"})," Verzonden naar ",m.meeting.attendees.length," deelnemer(s)"]})]}),(null==m?void 0:m.meeting.status)==="failed"&&(0,t.jsx)("div",{style:{background:"#f8d7da",padding:"15px",borderRadius:"8px",marginTop:"20px"},children:(0,t.jsx)("p",{children:"❌ Er is een fout opgetreden bij het verwerken van de meeting. Probeer het opnieuw of neem contact op met ondersteuning."})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=79)),_N_E=e.O()}]);